
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Warehouse Forklift Driving Game</title>
<link rel="manifest" href="manifest.json">
<style>
  html, body {
    margin: 0;
    padding:
      env(safe-area-inset-top)
      env(safe-area-inset-right)
      env(safe-area-inset-bottom)
      env(safe-area-inset-left);
    background: #050B18;
    color: white;
    font-family: sans-serif;
    overflow: hidden;
  }
  .row {
    padding: 10px;
    text-align: center;
  }
  canvas {
    background: #0B1221;
    display: block;
    border-radius: 12px;
    margin: auto;
  }
  .controls {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    padding: 10px;
    gap: 10px;
  }
  .btn {
    width: 60px;
    height: 60px;
    background: #111a2b;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
    color: white;
    user-select: none;
  }
</style>
</head>
<body>

<div class="row">
  <h1>Warehouse Forklift Driving Game</h1>
  <div><strong>Score:</strong> <span id="score">0</span> / 5</div>
  <button onclick="resetGame()">Reset</button>
</div>

<div id="game">
  <canvas id="stage" width="320" height="320"></canvas>
</div>

<div class="controls">
  <div class="btn" ontouchstart="move('left')">&#8592;</div>
  <div class="btn" ontouchstart="move('up')">&#8593;</div>
  <div class="btn" ontouchstart="move('right')">&#8594;</div>
  <div class="btn" ontouchstart="move('down')">&#8595;</div>
</div>

<script>
const BASE_W = 320, BASE_H = 320;
const game = document.getElementById('game');
const stage = document.getElementById('stage');
const ctx = stage.getContext('2d');

let forklift = {x: 50, y: 50};
let pallets = [];
let score = 0;

function resetGame() {
  forklift = {x: 50, y: 50};
  pallets = Array.from({length: 5}, () => ({
    x: Math.random()*280, 
    y: Math.random()*280
  }));
  score = 0;
  document.getElementById('score').textContent = score;
}

function draw() {
  ctx.clearRect(0, 0, BASE_W, BASE_H);
  // Forklift
  ctx.fillStyle = "orange";
  ctx.fillRect(forklift.x, forklift.y, 20, 10);

  // Pallets
  ctx.fillStyle = "red";
  pallets.forEach(p => ctx.fillRect(p.x, p.y, 15, 15));
}

function update() {
  draw();
  requestAnimationFrame(update);
}

function move(dir) {
  if (dir === 'left') forklift.x -= 5;
  if (dir === 'right') forklift.x += 5;
  if (dir === 'up') forklift.y -= 5;
  if (dir === 'down') forklift.y += 5;
}

// Responsive fit to screen height & width
function fit() {
  const header = document.querySelector('.row');
  const controls = document.querySelector('.controls');

  const vw = document.documentElement.clientWidth;
  const vh = window.innerHeight;

  const headerH = header ? header.getBoundingClientRect().height : 0;
  const controlsH = (controls && getComputedStyle(controls).display !== 'none')
      ? controls.getBoundingClientRect().height : 0;

  const verticalPadding = 24;
  const availableH = Math.max(240, vh - headerH - controlsH - verticalPadding);

  const s = Math.min(vw / BASE_W, availableH / BASE_H, 1);

  stage.style.transform = `translateX(${(vw - BASE_W * s) / 2}px) scale(${s})`;
  game.style.height = (BASE_H * s) + 'px';
}

addEventListener('resize', fit);
addEventListener('orientationchange', fit);
new ResizeObserver(fit).observe(game);
fit();

resetGame();
update();
</script>

</body>
</html>